#!/bin/bash
# REQUIRES THAT YOU HAVE A .secrets file in your ~ dir!
. ./.secrets

# update database
udb () 
{
  $db = $1
  $filename = $2

  USERNAME="ni_developers"
  PASSWORD=$dbpass
  DBHOST="nirepdb"
  DBNAME=$db
  PORT="5432"
  FILENAME=$filename

  if [ "$db" == "cddev" ]; then
  fi

  echo "Validating $filename on $db"
  liquibase --classpath=/usr/lib/java/lib --username=${USERNAME} --password=${PASSWORD} --url=jdbc:postgresql://${DBHOST}:${PORT}/${DBNAME} --changeLogFile=$filenmae  --defaultSchemaName=mrsdba --logLevel=info validate
  echo "Updating ${HOST}:${DBNAME}"
  liquibase --classpath=/usr/lib/java/lib --username=${USERNAME} --password=${PASSWORD} --url=jdbc:postgresql://${DBHOST}:${PORT}/${DBNAME} --changeLogFile=$filenmae --defaultSchemaName=mrsdba --logLevel=info update
  echo ""
  echo "Done"
}
